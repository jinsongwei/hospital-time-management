<!DOCTYPE HTML>
<html>

<head>
    <script type="text/javascript">
        window.onload = function ()

            // dataPoints
            let dataPointsGeneral = [];
            let dataPointsOphthalmology = [];

            let chart = new CanvasJS.Chart("chartContainer", {
                zoomEnabled: true,
                title: {
                    text: "Hospital Service Time Line"
                },
                toolTip: {
                    shared: true

                },
                legend: {
                    verticalAlign: "top",
                    horizontalAlign: "center",
                    fontSize: 14,
                    fontWeight: "bold",
                    fontFamily: "calibri",
                    fontColor: "dimGrey"
                },
                axisX: {
                    title: "chart updates every 1 secs"
                },
                axisY: {
                    prefix: '#',
                    includeZero: false
                },
                data: [{
                    // dataSeries1
                    type: "line",
                    xValueType: "dateTime",
                    showInLegend: true,
                    name: "General",
                    dataPoints: dataPointsGeneral
                },
                    {
                        // dataSeries2
                        type: "line",
                        xValueType: "dateTime",
                        showInLegend: true,
                        name: "Company B",
                        dataPoints: dataPointsOphthalmology
                    }],
                legend: {
                    cursor: "pointer",
                    itemclick: function (e) {
                        if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
                            e.dataSeries.visible = false;
                        }
                        else {
                            e.dataSeries.visible = true;
                        }
                        chart.render();
                    }
                }
            });


            let updateInterval = 1000;
            // initial value
            let yValue1 = 640;
            let yValue2 = 604;

            let time = new Date;
            time.setHours(9);
            time.setMinutes(30);
            time.setSeconds(0);
            time.setMilliseconds(0);
            // starting at 9.30 am

            let updateChart = function (count) {
                count = count || 1;

                // count is number of times loop runs to generate random dataPoints. 

                for (let i = 0; i < count; i++) {

                    // add interval duration to time				
                    time.setTime(time.getTime() + updateInterval);


                    // generating random values
                    let deltaY1 = .5 + Math.random() * (-.5 - .5);
                    let deltaY2 = .5 + Math.random() * (-.5 - .5);

                    // adding random value and rounding it to two digits. 
                    yValue1 = Math.round((yValue1 + deltaY1) * 100) / 100;
                    yValue2 = Math.round((yValue2 + deltaY2) * 100) / 100;

                    // pushing the new values
                    dataPointsGeneral.push({
                        x: time.getTime(),
                        y: yValue1
                    });
                    dataPointsOphthalmology.push({
                        x: time.getTime(),
                        y: yValue2
                    });


                }
                ;

                // updating legend text with  updated with y Value 
                chart.options.data[0].legendText = " General # " + yValue1;
                chart.options.data[1].legendText = " Oppp  #" + yValue2;

                chart.render();

            };

            // generates first set of dataPoints 
            updateChart(3000);

            // update chart after specified interval 
            setInterval(function () {
                updateChart()
            }, updateInterval);
        }
    </script>
    <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
</head>
<body>
<div id="chartContainer" style="height: 300px; width: 100%;">
</div>
</body>


</html>